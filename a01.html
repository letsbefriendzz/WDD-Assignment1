<!DOCTYPE html>
<html lang="en">
<head>
    <title>Web Dev A-01</title>
</head>
<body style="background-color: lightgray;">
    <script type="text/javascript">
        /*
            This is a simple meme!
        */
        console.log("*************************\nRYAN ENNS / 7216757\nWEB DESIGN & DEVELOPMENT\nASSIGNMENT #1\n*************************")
        let userName = "";
        let maxNum = 0;
        let randomNum = 0;

        //These functions exist because the headers aren't updated with the respective data collection
        //functions! What an awful design! So we're compensating with this trash!
        function minputHeaders()
        {
            //Change the header to ask for a maximum number.
            document.getElementById("heading").innerText = "Alright, " + userName + ".";

            //Change the subheading text.
            document.getElementById("head2").innerText = "Enter a maximum number.";

            //Change the form background text to reflect the header change.
            document.getElementById("input").placeholder = "Max Number"

            //Change the function that the button calls from the present fuinction to enterMax();
            document.getElementById("button").onclick = enterMax;
        }

        function ginputHeaders()
        {
            //Change the heading.
            document.getElementById("heading").innerText = "Go ahead, take a guess.";

            //Change the subheading.
            document.getElementById("head2").innerText = "Anything between 1 and " + maxNum + ".";

            //Change the text placeholder in the form.
            document.getElementById("input").placeholder = "Guess";

            //Change the submit button text.
            document.getElementById("button").innerText = "Make This Guess";

            //Change the function executed by the submit button.
            document.getElementById("button").onclick = enterGuess;
        }

        function enterName()
        {
            //Clear the statusmsg message, if there is one.
            document.getElementById("statusmsg").innerText = "";

            //Create a variable to represent the text field.
            //I'm realizing I've given the <input> tag 
            let inp = document.getElementById("input");
            
            if(inp.value.length === 0)
            {
                document.getElementById("statusmsg").innerText = "You need to enter a name!"
            }
            else
            {
                //Assign the userName variable the name that the user has entered.
                userName = inp.value;

                minputHeaders();
            }

            //Dump the value collected to the console.
            console.log(inp.value);

            //Clear the text box of previous input.
            inp.value = "";
        }

        function enterMax()
        {
            minputHeaders();

            let inp = document.getElementById("input");
            
            //regex lol
            if(!/^\d+$/.test(inp.value) || inp.value < 2)
            {
                document.getElementById("statusmsg").innerText + "That's an invalid number!";
                console.log("BAD")
            }
            else
            {
                //Assign the maximum number value.
                maxNum = Number(inp.value);

                ginputHeaders();
            }

            randomNum = Math.floor((Math.random()*maxNum) + 1);
            console.log("Random Number:" + randomNum);
            inp.value = "";
        }

        function enterGuess()
        {

            if(/[/d]/.test(document.getElementById("input").value))
            {
                console.log("bad guess!")
            }

            if(document.getElementById("input").value == randomNum)
            {
                console.log("Success");

                //Make the status message a success notif and green
                document.getElementById("statusmsg").innerText = "You guessed right!";
                document.getElementById("statusmsg").style.color = "green";

                //Graying out the input box and offering to play again.
                //this is the first of two lines giving you trouble.
                document.getElementById("input").disabled = "true";
                document.getElementById("button").innerText = "Play Again";
                document.getElementById("button").onclick = playAgain;

                //Changing the heading and subheading to reflect the winners' status.
                document.getElementById("heading").innerText = "You Guess Right!";
                document.getElementById("head2").innerText = "Great Job!";
            }

            document.getElementById("input").value = "";
        }

        //a function designed to reinit all html elements to play the game again,
        //not reasking for a player's name.
        function playAgain()
        {
            minputHeaders();
            console.log("false!")

            //THIS LINE MAKES ME ANGRY!
            //this is the second of the two lines giving you trouble.
            document.getElementById("input").disabled = "false";
            document.getElementById("button").onclick = enterMax;
        }
    </script>

    <h2 id="heading" style="text-align: center; font-size: 5vw; margin: 0;">Hello.</h2>
    <h4 id="head2" style="text-align: center; font-size: 2vw; margin: 0; margin-bottom: 1%;">Enter your name.</h4>
    <div id="inpDiv" style="display: flex; justify-content: center;">
        <input type="text" id="input" placeholder="Name" style="text-align: center; height: 5vh; font-size: 25pt;">
    </div>
        <br><br>
    <div style="display: flex; justify-content: center;">
        <button onclick="enterName()" id="button" style="font-size: 25pt; padding: 2vh;">Submit</button>
    </div>
    <p id="statusmsg" style="font-size: 25pt; text-align: center; color: red;"></p>
</body>
</html>